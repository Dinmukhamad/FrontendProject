<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Premium luxury car dealership offering the finest selection of high-end vehicles including BMW, Mercedes-Benz, Porsche, Audi, Lamborghini, and Rolls-Royce">
  <title>PRESTIGE MOTORS - Luxury Car Dealership</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/auth.css') }}">
</head>
<body>
  <!-- HEADER & NAVIGATION -->
  <header>
    <nav>
      <a href="#home" class="logo">PRESTIGE</a>
      <ul class="nav-links">
        <li><a href="#home" class="active">Home</a></li>
        <li><a href="#cars">Cars</a></li>
        <li><a href="#contact">Contact</a></li>
        {% if current_user.is_authenticated %}
          <li><a href="{{ url_for('profile') }}">Profile</a></li>
          {% if current_user.is_admin %}
            <li><a href="{{ url_for('admin_dashboard') }}">Admin</a></li>
          {% endif %}
          <li><a href="{{ url_for('logout') }}">Logout</a></li>
        {% else %}
          <li><a href="{{ url_for('login') }}">Login</a></li>
          <li><a href="{{ url_for('register') }}">Register</a></li>
        {% endif %}
      </ul>
    </nav>
  </header>

  <!-- Flash Messages -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="flash-messages">
        {% for category, message in messages %}
          <div class="flash-message flash-{{ category }}">
            {{ message }}
            <button class="close-flash" onclick="this.parentElement.remove()">×</button>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <!-- MAIN CONTENT -->
  <main>
    <!-- HERO SECTION -->
    <section id="home" class="hero">
      <div class="hero-content">
        <p class="subtitle">Experience Excellence</p>
        <h1>Where Luxury Meets Performance</h1>
        <p>Discover our meticulously curated collection of the world's most prestigious automobiles. Each vehicle represents the pinnacle of engineering, design, and craftsmanship.</p>
        <a href="#cars" class="btn btn-primary">Explore Collection</a>
      </div>
    </section>

    <!-- INTRODUCTION SECTION -->
    <section class="intro">
      <div class="container">
        <h2>The Art of Automotive Excellence</h2>
        <p>At Prestige Motors, we understand that owning a luxury vehicle is more than transportation—it's a statement of success, a celebration of achievement, and an expression of refined taste. Our exclusive showroom features only the most exceptional vehicles from the world's most revered manufacturers.</p>
        <p>With decades of expertise in the luxury automotive market, our dedicated team provides personalized service to match you with your perfect vehicle. From the moment you step into our showroom to the day you drive away, we ensure your experience is nothing short of extraordinary.</p>
        <a href="#cars" class="btn">View Our Collection</a>
      </div>
    </section>

    <!-- CARS SECTION -->
    <section id="cars">
      <div class="container">
        <div class="section-title">
          <h1>Our Exclusive Collection</h1>
          <p>Handpicked masterpieces from the world's finest automotive manufacturers</p>
        </div>

        <!-- CAR GRID -->
        <div class="cars-grid">
          {% for car in cars %}
          <article class="car-card">
            {% if current_user.is_authenticated %}
            <button class="favorite-btn" onclick="toggleFavorite({{ car.id }})">
              <span class="heart-icon">♡</span>
            </button>
            {% endif %}
            
            <img src="{{ car.image_url }}" alt="{{ car.name }}" class="car-image">
            <div class="car-content">
              <h3>{{ car.name }}</h3>
              <p class="car-price">{{ car.price|currency }}</p>
              <div class="car-specs">
                <span><strong>Year:</strong> {{ car.year }}</span>
                <span><strong>HP:</strong> {{ car.horsepower }}</span>
              </div>
              <p>{{ car.description }}</p>
              <a href="#contact" class="btn" onclick="setVehicleInterest('{{ car.name }}')">Inquire Now</a>
            </div>
          </article>
          {% endfor %}
        </div>
      </div>
    </section>

    <!-- CONTACT SECTION -->
    <section id="contact">
      <div class="container">
        <div class="section-title">
          <h1>Get In Touch</h1>
          <p>We're here to help you find your perfect luxury vehicle</p>
        </div>

        <!-- CONTACT GRID -->
        <div class="contact-container">
          
          <!-- CONTACT INFORMATION -->
          <div class="contact-info">
            <h2>Visit Our Showroom</h2>
            
            <div class="contact-item">
              <h3>Address</h3>
              <p>1234 Luxury Boulevard<br>
              Beverly Hills, CA 90210<br>
              United States</p>
            </div>

            <div class="contact-item">
              <h3>Phone</h3>
              <p>+1 (310) 555-PRESTIGE<br>
              +1 (310) 555-7737</p>
            </div>

            <div class="contact-item">
              <h3>Email</h3>
              <p>info@prestigemotors.com<br>
              sales@prestigemotors.com</p>
            </div>

            <div class="contact-item">
              <h3>Showroom Hours</h3>
              <p>Monday - Friday: 9:00 AM - 7:00 PM<br>
              Saturday: 10:00 AM - 6:00 PM<br>
              Sunday: By Appointment Only</p>
            </div>
          </div>

          <!-- CONTACT FORM -->
          <div class="contact-form-wrapper">
            <h2>Send Us A Message</h2>
            <form class="contact-form" action="{{ url_for('submit_contact') }}" method="POST">
              
              <div class="form-group">
                <label for="name">Full Name *</label>
                <input type="text" id="name" name="name" placeholder="John Doe" required>
              </div>

              <div class="form-group">
                <label for="email">Email Address *</label>
                <input type="email" id="email" name="email" placeholder="john@example.com" required>
              </div>

              <div class="form-group">
                <label for="phone">Phone Number</label>
                <input type="tel" id="phone" name="phone" placeholder="+1 (555) 123-4567">
              </div>

              <div class="form-group">
                <label for="interest">Vehicle of Interest</label>
                <input type="text" id="interest" name="interest" placeholder="e.g., Rolls-Royce Ghost">
              </div>

              <div class="form-group">
                <label for="message">Message *</label>
                <textarea id="message" name="message" placeholder="Tell us about your requirements and preferences..." required></textarea>
              </div>

              <button type="submit" class="btn btn-primary">Send Message</button>
            </form>
          </div>

        </div>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer>
    <p>&copy; 2026 <span class="gold-text">Prestige Motors</span>. All Rights Reserved.</p>
  </footer>
  
  <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  <script>
    // Favorite toggle function
    function toggleFavorite(carId) {
      fetch(`/api/favorite/toggle/${carId}`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        }
      })
      .then(response => response.json())
      .then(data => {
        const btn = event.target.closest('.favorite-btn');
        const heart = btn.querySelector('.heart-icon');
        
        if (data.status === 'added') {
          heart.textContent = '♥';
          heart.style.color = '#c9a24d';
          showNotification('Added to favorites!', 'success');
        } else {
          heart.textContent = '♡';
          heart.style.color = '#c9a24d';
          showNotification('Removed from favorites', 'info');
        }
      })
      .catch(error => {
        console.error('Error:', error);
        showNotification('Please login to add favorites', 'error');
      });
    }

    // Pre-fill vehicle interest
    function setVehicleInterest(carName) {
      setTimeout(() => {
        const interestField = document.getElementById('interest');
        if (interestField) {
          interestField.value = carName;
        }
      }, 500);
    }

    // Notification function
    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      notification.className = `notification notification-${type}`;
      notification.textContent = message;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.classList.add('show');
      }, 100);
      
      setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => {
          if (notification.parentElement) {
            document.body.removeChild(notification);
          }
        }, 300);
      }, 3000);
    }
  </script>
</body>
</html>
